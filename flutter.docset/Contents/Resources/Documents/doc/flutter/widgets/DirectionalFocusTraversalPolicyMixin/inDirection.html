<!DOCTYPE html><html lang="en"><head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no"/>
  <meta name="description" content="API docs for the inDirection method from the DirectionalFocusTraversalPolicyMixin mixin, for the Dart programming language."/>
  <title>inDirection method - DirectionalFocusTraversalPolicyMixin mixin - widgets library - Dart API</title>

  <!-- required because all the links are pseudo-absolute -->
  <base href="../../"/>

  
  <link rel="preconnect" href="https://fonts.gstatic.com"/>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&amp;display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" rel="stylesheet"/>
  
  <link rel="stylesheet" href="static-assets/github.css?v1"/>
  <link rel="stylesheet" href="static-assets/styles.css?v1"/>
  <link rel="icon" href="static-assets/favicon.png?v1"/>

  <!-- style overrides for dartdoc -->
<style>
@import 'https://fonts.googleapis.com/css?family=Roboto:500,400italic,300,400,100i';
@import 'https://fonts.googleapis.com/css?family=Google+Sans:500,400italic,300,400,100i';
@import 'https://fonts.googleapis.com/css?family=Open+Sans:500,400italic,300,400,100i';
@import 'https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Sharp|Material+Icons+Round';
</style>

<link href="https://flutter.github.io/assets-for-api-docs/assets/cupertino/cupertino.css" rel="stylesheet" type="text/css"/>

<link href="../assets/overrides.css" rel="stylesheet" type="text/css"/>

<link href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Sharp|Material+Icons+Round" rel="stylesheet"/>
<style>
  /* Rule for sizing the icon. */
  .md-36 { font-size: 36px; }
</style>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-67589403-1', 'auto');
  ga('send', 'pageview');
</script>

<script async="" defer="" src="../assets/api_survey.js"></script>

<!-- Styles and scripting for handling custom code snippets -->
<link href="../assets/snippets.css" rel="stylesheet" type="text/css"/>
<script src="../assets/snippets.js"></script>

<link rel="search" type="application/opensearchdescription+xml" title="Flutter API" href="opensearch.xml"/>

</head>


<body data-base-href="../../" data-using-base-href="true" class="light-theme">

<div id="overlay-under-drawer"></div>

<header id="title">
  <span id="sidenav-left-toggle" class="material-symbols-outlined" role="button" tabindex="0">menu</span>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="index.html">Flutter</a></li>
    <li><a href="widgets/widgets-library.html">widgets</a></li>
    <li><a href="widgets/DirectionalFocusTraversalPolicyMixin-mixin.html">DirectionalFocusTraversalPolicyMixin</a></li>
    <li class="self-crumb">inDirection method</li>
  </ol>
  <div class="self-name">inDirection</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled="" class="form-control typeahead" placeholder="Loading search..."/>
  </form>
  <div class="toggle" id="theme-button">
    <label for="theme">
      <input type="checkbox" id="theme" value="light-theme"/>
      <span class="material-symbols-outlined">
        brightness_4
      </span>
    </label>
  </div>
</header>
<main>

  <div id="dartdoc-main-content" class="main-content">
      <div>
  <div id="external-links" class="btn-group"><a title="View source code" class="source-link" href="https://github.com/flutter/flutter/blob/master/packages/flutter/lib/src/widgets/focus_traversal.dart#L717"><span class="material-symbols-outlined">description</span></a></div>
<h1><a class="dashingAutolink" name="autolink-68762"></a><a class="dashAnchor" name="//apple_ref/cpp/Method/inDirection"></a><span class="kind-method">inDirection</span> method 
    <a href="https://dart.dev/null-safety" class="feature feature-null-safety" title="Supports the null safety language feature.">Null safety</a>
</h1></div>

    <section class="multi-line-signature">
      
  <div>
    <ol class="annotation-list">
        <li>@<a href="meta/mustCallSuper-constant.html">mustCallSuper</a></li>
        <li>@<a href="dart-core/override-constant.html">override</a></li>
    </ol>
  </div>

<span class="returntype"><a href="dart-core/bool-class.html">bool</a></span>
<span class="name ">inDirection</span>(<wbr/><ol class="parameter-list"><li><span class="parameter" id="inDirection-param-currentNode"><span class="type-annotation"><a href="widgets/FocusNode-class.html">FocusNode</a></span> <span class="parameter-name">currentNode</span>, </span></li>
<li><span class="parameter" id="inDirection-param-direction"><span class="type-annotation"><a href="widgets/TraversalDirection.html">TraversalDirection</a></span> <span class="parameter-name">direction</span></span></li>
</ol>)

      <div class="features"><span class="feature">override</span></div>

    </section>
    
<section class="desc markdown">
  <p>Focuses the next widget in the given <code>direction</code> in the <a href="widgets/FocusScope-class.html">FocusScope</a> that
contains the <code>currentNode</code>.</p>
<p>This determines what the next node to receive focus in the given
<code>direction</code> will be by inspecting the node tree, and then calling
<a href="widgets/FocusNode/requestFocus.html">FocusNode.requestFocus</a> on it.</p>
<p>Returns true if it successfully found a node and requested focus.</p>
<p>Maintains a stack of previous locations that have been visited on the
policy data for the affected <a href="widgets/FocusScopeNode-class.html">FocusScopeNode</a>. If the previous direction
was the opposite of the current direction, then the this policy will
request focus on the previously focused node. Change to another direction
other than the current one or its opposite will clear the stack.</p>
<p>If this function returns true when called by a subclass, then the subclass
should return true and not request focus from any node.</p>
</section>


    
<section class="summary source-code" id="source">
  <h2><span>Implementation</span></h2>
  <pre class="language-dart"><code class="language-dart">@mustCallSuper
@override
bool inDirection(FocusNode currentNode, TraversalDirection direction) {
  final FocusScopeNode nearestScope = currentNode.nearestScope!;
  final FocusNode? focusedChild = nearestScope.focusedChild;
  if (focusedChild == null) {
    final FocusNode firstFocus = findFirstFocusInDirection(currentNode, direction) ?? currentNode;
    switch (direction) {
      case TraversalDirection.up:
      case TraversalDirection.left:
        _focusAndEnsureVisible(
          firstFocus,
          alignmentPolicy: ScrollPositionAlignmentPolicy.keepVisibleAtStart,
        );
        break;
      case TraversalDirection.right:
      case TraversalDirection.down:
        _focusAndEnsureVisible(
          firstFocus,
          alignmentPolicy: ScrollPositionAlignmentPolicy.keepVisibleAtEnd,
        );
        break;
    }
    return true;
  }
  if (_popPolicyDataIfNeeded(direction, nearestScope, focusedChild)) {
    return true;
  }
  FocusNode? found;
  final ScrollableState? focusedScrollable = Scrollable.maybeOf(focusedChild.context!);
  switch (direction) {
    case TraversalDirection.down:
    case TraversalDirection.up:
      Iterable&lt;FocusNode&gt;? eligibleNodes = _sortAndFilterVertically(
        direction,
        focusedChild.rect,
        nearestScope.traversalDescendants,
      );
      if (focusedScrollable != null &amp;&amp; !focusedScrollable.position.atEdge) {
        final Iterable&lt;FocusNode&gt; filteredEligibleNodes = eligibleNodes!.where((FocusNode node) =&gt; Scrollable.maybeOf(node.context!) == focusedScrollable);
        if (filteredEligibleNodes.isNotEmpty) {
          eligibleNodes = filteredEligibleNodes;
        }
      }
      if (eligibleNodes!.isEmpty) {
        break;
      }
      List&lt;FocusNode&gt; sorted = eligibleNodes.toList();
      if (direction == TraversalDirection.up) {
        sorted = sorted.reversed.toList();
      }
      // Find any nodes that intersect the band of the focused child.
      final Rect band = Rect.fromLTRB(focusedChild.rect.left, -double.infinity, focusedChild.rect.right, double.infinity);
      final Iterable&lt;FocusNode&gt; inBand = sorted.where((FocusNode node) =&gt; !node.rect.intersect(band).isEmpty);
      if (inBand.isNotEmpty) {
        // The inBand list is already sorted by horizontal distance, so pick
        // the closest one.
        found = inBand.first;
        break;
      }
      // Only out-of-band targets remain, so pick the one that is closest the
      // to the center line horizontally.
      mergeSort&lt;FocusNode&gt;(sorted, compare: (FocusNode a, FocusNode b) {
        return (a.rect.center.dx - focusedChild.rect.center.dx).abs().compareTo((b.rect.center.dx - focusedChild.rect.center.dx).abs());
      });
      found = sorted.first;
      break;
    case TraversalDirection.right:
    case TraversalDirection.left:
      Iterable&lt;FocusNode&gt;? eligibleNodes = _sortAndFilterHorizontally(direction, focusedChild.rect, nearestScope);
      if (focusedScrollable != null &amp;&amp; !focusedScrollable.position.atEdge) {
        final Iterable&lt;FocusNode&gt; filteredEligibleNodes = eligibleNodes!.where((FocusNode node) =&gt; Scrollable.maybeOf(node.context!) == focusedScrollable);
        if (filteredEligibleNodes.isNotEmpty) {
          eligibleNodes = filteredEligibleNodes;
        }
      }
      if (eligibleNodes!.isEmpty) {
        break;
      }
      List&lt;FocusNode&gt; sorted = eligibleNodes.toList();
      if (direction == TraversalDirection.left) {
        sorted = sorted.reversed.toList();
      }
      // Find any nodes that intersect the band of the focused child.
      final Rect band = Rect.fromLTRB(-double.infinity, focusedChild.rect.top, double.infinity, focusedChild.rect.bottom);
      final Iterable&lt;FocusNode&gt; inBand = sorted.where((FocusNode node) =&gt; !node.rect.intersect(band).isEmpty);
      if (inBand.isNotEmpty) {
        // The inBand list is already sorted by vertical distance, so pick the
        // closest one.
        found = inBand.first;
        break;
      }
      // Only out-of-band targets remain, so pick the one that is closest the
      // to the center line vertically.
      mergeSort&lt;FocusNode&gt;(sorted, compare: (FocusNode a, FocusNode b) {
        return (a.rect.center.dy - focusedChild.rect.center.dy).abs().compareTo((b.rect.center.dy - focusedChild.rect.center.dy).abs());
      });
      found = sorted.first;
      break;
  }
  if (found != null) {
    _pushPolicyData(direction, nearestScope, focusedChild);
    switch (direction) {
      case TraversalDirection.up:
      case TraversalDirection.left:
        _focusAndEnsureVisible(
          found,
          alignmentPolicy: ScrollPositionAlignmentPolicy.keepVisibleAtStart,
        );
        break;
      case TraversalDirection.down:
      case TraversalDirection.right:
        _focusAndEnsureVisible(
          found,
          alignmentPolicy: ScrollPositionAlignmentPolicy.keepVisibleAtEnd,
        );
        break;
    }
    return true;
  }
  return false;
}</code></pre>
</section>


  </div> <!-- /.main-content -->

  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled="" class="form-control typeahead" placeholder="Loading search..."/>
  </form>
</header>

<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
  <li><a href="index.html">Flutter</a></li>
  <li><a href="widgets/widgets-library.html">widgets</a></li>
  <li><a href="widgets/DirectionalFocusTraversalPolicyMixin-mixin.html">DirectionalFocusTraversalPolicyMixin</a></li>
  <li class="self-crumb">inDirection method</li>
</ol>


    <h5>DirectionalFocusTraversalPolicyMixin mixin</h5>
    <ol>



        <li class="section-title inherited">
          <a href="widgets/DirectionalFocusTraversalPolicyMixin-mixin.html#instance-properties">Properties</a>
        </li>
          <li class="inherited"><a href="dart-core/Object/hashCode.html">hashCode</a></li>
          <li class="inherited"><a href="dart-core/Object/runtimeType.html">runtimeType</a></li>

        <li class="section-title"><a href="widgets/DirectionalFocusTraversalPolicyMixin-mixin.html#instance-methods">Methods</a></li>
          <li><a href="widgets/DirectionalFocusTraversalPolicyMixin/changedScope.html">changedScope</a></li>
          <li class="inherited"><a href="foundation/Diagnosticable/debugFillProperties.html">debugFillProperties</a></li>
          <li class="inherited"><a href="widgets/FocusTraversalPolicy/findFirstFocus.html">findFirstFocus</a></li>
          <li><a href="widgets/DirectionalFocusTraversalPolicyMixin/findFirstFocusInDirection.html">findFirstFocusInDirection</a></li>
          <li class="inherited"><a href="widgets/FocusTraversalPolicy/findLastFocus.html">findLastFocus</a></li>
          <li><a href="widgets/DirectionalFocusTraversalPolicyMixin/inDirection.html">inDirection</a></li>
          <li><a href="widgets/DirectionalFocusTraversalPolicyMixin/invalidateScopeData.html">invalidateScopeData</a></li>
          <li class="inherited"><a href="widgets/FocusTraversalPolicy/next.html">next</a></li>
          <li class="inherited"><a href="dart-core/Object/noSuchMethod.html">noSuchMethod</a></li>
          <li class="inherited"><a href="widgets/FocusTraversalPolicy/previous.html">previous</a></li>
          <li class="inherited"><a href="widgets/FocusTraversalPolicy/sortDescendants.html">sortDescendants</a></li>
          <li class="inherited"><a href="foundation/Diagnosticable/toDiagnosticsNode.html">toDiagnosticsNode</a></li>
          <li class="inherited"><a href="foundation/Diagnosticable/toString.html">toString</a></li>
          <li class="inherited"><a href="foundation/Diagnosticable/toStringShort.html">toStringShort</a></li>

        <li class="section-title inherited"><a href="widgets/DirectionalFocusTraversalPolicyMixin-mixin.html#operators">Operators</a></li>
          <li class="inherited"><a href="dart-core/Object/operator_equals.html">operator ==</a></li>




</ol>

  </div><!--/.sidebar-offcanvas-->

  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
  </div><!--/.sidebar-offcanvas-->

</main>

<footer>
  <span class="no-break">
    Flutter
      0.0.0
  </span>

  <script src="footer.js"></script>
</footer>



<script src="static-assets/highlight.pack.js?v1"></script>
<script src="static-assets/docs.dart.js"></script>







</body></html>